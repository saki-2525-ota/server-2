<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GETリクエスト</title>
    <style>
      table,
      th,
      td {
        border: solid black 1px;
        border-collapse: collapse;
        padding: 5px 10px;
      }
    </style>
    <script src="https://unpkg.com/petite-vue" defer init></script>
  </head>

  <body v-scope="dataset()" @vue:mounted="fetchData">
    <p>
      <!--<button @click="fetchData">データ取得</button>-->
    </p>
    <p>{{data}}</p>
  </body>

  <script>
    document.addEventListener('DOMContentLoaded', () => fetchData());
    function dataset() {
      return {
        data: false,
        id: Mash.round(Math.random() * 100),
        async fetchData() {
          const query = new URLSearchParams({
            api: localStorage.apikey,
            aaa: 'AAA',
            'bbb BBB': 'ccc CCC',
            id: this.id
          });
          //const res = await fetch('https://jsonplaceholder.typicode.com/todos/' + this.id);
          const res = await fetch('https://httpbin.org/get?aaa=AAA&bbb=BBB');

          const obj = await res.json();
          this.data = obj.args;
          console.log(json.stringify(this.data, null, 2));
        }
      };
    }
  </script>
  <!--<table v-if="data">
      <tr>
        <td rowspan="3"><img :src="data.picture.large" /></td>
        <td>氏名</td>
        <td>{{data.name.first}} {{data.name.last}}</td>
      </tr>
      <tr>
        <td>居住国</td>
        <td></td>
      </tr>
      <tr>
        <td>メール</td>
        <td></td>
      </tr>
    </table>-->
</html>
